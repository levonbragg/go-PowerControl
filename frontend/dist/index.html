<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Go PowerControl</title>
    <link rel="stylesheet" href="assets/app.css">
</head>

<body>
    <div class="app-container">
        <div class="menu-bar">
            <div class="menu-item" onclick="app.showSetup()">⚙️ Setup</div>
            <div class="menu-item" onclick="app.exit()">❌ Exit</div>
            <div class="menu-item" style="margin-left: auto;" onclick="app.showAbout()">ℹ️ About</div>
        </div>
        <div class="main-content">
            <div class="left-panel">
                <div class="message-log">
                    <div
                        style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                        <h3 style="color: var(--primary-light);">Message Log</h3>
                        <button class="secondary" onclick="app.clearLog()">Clear</button>
                    </div>
                    <div id="messageList"></div>
                </div>
            </div>
            <div class="right-panel">
                <input type="text" id="searchBox" class="search-box" placeholder="Search devices..."
                    oninput="app.handleSearch(this.value)" />
                <div class="device-grid">
                    <table class="grid-table">
                        <thead>
                            <tr>
                                <th>Device Name</th>
                                <th>Outlet #</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody id="deviceTableBody">
                            <tr>
                                <td colspan="3"
                                    style="text-align: center; color: var(--text-secondary); padding: 2rem;">No devices
                                    found</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="control-panel">
                    <div class="flex items-center gap-2 flex-1">
                        <span class="control-label">Device:</span>
                        <span class="control-value" id="selectedDevice">-</span>
                        <span class="control-label" style="margin-left: 2rem;">Outlet #:</span>
                        <span class="control-value" id="selectedOutlet">-</span>
                    </div>
                    <select id="stateSelector" disabled>
                        <option value="OFF">OFF</option>
                        <option value="ON">ON</option>
                    </select>
                    <button id="sendButton" onclick="app.sendCommand()" disabled>Send</button>
                </div>
            </div>
        </div>
        <div class="status-bar">
            <div class="status-indicator" id="statusIndicator"></div>
            <span id="statusText">Disconnected</span>
        </div>
    </div>
    <div id="setupDialog" class="modal-overlay" style="display: none;">
        <div class="modal">
            <h2>⚙️ Settings</h2>
            <div class="form-group"><label for="setupUsername">Username</label><input id="setupUsername" type="text"
                    placeholder="MQTT username" /></div>
            <div class="form-group"><label for="setupPassword">Password</label><input id="setupPassword" type="password"
                    placeholder="MQTT password" /></div>
            <div class="form-group"><label for="setupServer">MQTT Server</label><input id="setupServer" type="text"
                    placeholder="e.g., 192.168.1.100" /></div>
            <div class="form-group"><label for="setupPort">Port</label><input id="setupPort" type="number"
                    value="1883" /></div>
            <div class="form-group"><label for="setupSubscribe">Subscribe String</label><input id="setupSubscribe"
                    type="text" value="power/#" /></div>
            <div class="modal-actions">
                <button class="secondary" onclick="app.closeSetup()">Cancel</button>
                <button onclick="app.saveSettings()">Save</button>
            </div>
        </div>
    </div>
    <div id="aboutDialog" class="modal-overlay" style="display: none;">
        <div class="modal">
            <h2>ℹ️ About Go PowerControl</h2>
            <div style="margin: 1.5rem 0; line-height: 1.8;">
                <p><strong>Version:</strong> 1.0.0</p>
                <p><strong>Description:</strong> Cross-platform MQTT power control application</p>
                <p><strong>Framework:</strong> Go + Wails v2</p>
                <p><strong>License:</strong> MIT</p>
            </div>
            <p style="color: var(--text-secondary); font-size: 0.875rem; margin-top: 1rem;">A modern rewrite of the C#
                Windows Forms power control app.</p>
            <div class="modal-actions"><button onclick="app.closeAbout()">Close</button></div>
        </div>
    </div>
    <script src="assets/wailsjs/runtime/runtime.js"></script>
    <script src="assets/wailsjs/go/app/App.js"></script>
    <script src="assets/app.js"></script>
</body>

</html>